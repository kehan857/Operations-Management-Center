# 通用搜索组件设计方案

## 1. 组件概述

通用搜索组件是运营管理中心的核心组件，用于所有列表页面的搜索与筛选功能。该组件需支持多维度搜索、组合筛选、结果排序和条件保存等功能。

## 2. 组件结构

### 2.1 基础搜索区

![基础搜索区草图](基础搜索区示意图)

- **关键词搜索框**：支持多维度搜索
  - 搜索框左侧提供搜索范围选择下拉菜单
  - 搜索框右侧提供搜索按钮和高级搜索切换按钮
  - 搜索框下方提供搜索建议和历史记录
  
- **快捷筛选标签**：显示常用筛选条件
  - 系统预设标签（如"今日新增"、"待处理"等）
  - 用户保存的自定义标签
  - 每个标签可一键应用对应的筛选条件

### 2.2 高级搜索区

![高级搜索区草图](高级搜索区示意图)

- **多维度筛选面板**：根据当前模块提供不同的筛选项
  - 支持时间范围选择（日期选择器）
  - 支持数值范围筛选（滑块或输入框）
  - 支持状态多选（复选框组）
  - 支持标签筛选（标签选择器）

- **组合条件区**：构建复杂的筛选组合
  - 支持添加/删除筛选条件
  - 支持条件间的"与"/"或"逻辑关系设置
  - 支持条件组嵌套（最多三层）

- **排序控制**：设置结果排序方式
  - 提供预设排序选项（如"创建时间从新到旧"）
  - 支持多字段组合排序
  
- **条件管理**：
  - "保存为快捷筛选"按钮
  - "重置条件"按钮
  - "导出结果"按钮（根据权限显示）

## 3. 交互逻辑

### 3.1 搜索输入逻辑

1. **实时搜索提示**：
   - 用户输入关键词时实时展示匹配结果（延迟300ms）
   - 提示内容包括：历史搜索、热门搜索、匹配结果预览

2. **语义化搜索**：
   - 支持自然语言解析（例如"昨天新增的用户"）
   - 支持拼音、首字母和模糊匹配
   - 支持特殊格式识别（如手机号、订单号格式）

3. **精确匹配模式**：
   - 使用引号包围关键词进行精确匹配
   - 提供精确匹配开关，切换搜索模式

### 3.2 筛选条件交互

1. **条件面板展开/收起**：
   - 点击"高级搜索"按钮展开/收起
   - 可拖动调整高级搜索区域高度
   
2. **条件保存机制**：
   - 保存筛选条件需命名并可选择是否公开给团队
   - 系统自动记录最近使用的5组条件
   - 支持管理已保存的条件（编辑/删除）

3. **条件应用方式**：
   - 设置完成后点击"应用"实时筛选
   - 支持"边筛选边查看"模式，改变条件后自动应用（可在设置中开启）

### 3.3 搜索结果响应

1. **加载状态反馈**：
   - 搜索过程中显示动态加载指示器
   - 大数据量查询时显示进度百分比
   
2. **结果集导航**：
   - 支持键盘上下键导航搜索结果
   - 高亮当前选中的结果项
   
3. **空结果处理**：
   - 无匹配结果时提供建议和可能原因
   - 提供"清除条件重试"一键操作

## 4. 视觉设计

### 4.1 组件样式

- **整体风格**：简洁专业、高对比度、易于识别
- **色彩方案**：
  - 主色：#2463EB（蓝色）- 用于按钮、高亮等
  - 辅助色：#F9FAFB（浅灰）- 用于背景、分割
  - 强调色：#F97316（橙色）- 用于提示、重要标记
  
- **字体与排版**：
  - 主字体：PingFang SC/思源黑体/微软雅黑
  - 基础字号：14px（正文）、12px（标签）、16px（标题）
  - 行高：1.5倍字体大小，确保易读性

### 4.2 响应式设计

- **自适应布局**：
  - 基础搜索区固定在页面顶部，不随滚动消失
  - 高级搜索区可折叠，避免占用过多空间
  
- **移动端适配**：
  - 小屏幕上筛选条件改为抽屉模式
  - 多列筛选项自动转为单列
  
- **大屏优化**：
  - 宽屏下搜索区采用双列布局增强可读性
  - 提供更多可视筛选条件，减少切换操作

### 4.3 状态与反馈

- **组件状态**：为各种交互状态设计清晰的视觉反馈
  - 默认态、聚焦态、填充态、禁用态
  - 使用微动效增强交互体验（如筛选条件添加/移除动画）
  
- **结果高亮**：搜索结果中匹配的关键词使用高亮处理
  - 精确匹配：#FFEB3B背景色（黄色）
  - 模糊匹配：#E3F2FD背景色（浅蓝）

## 5. 性能优化

- **延迟加载**：高级筛选面板按需加载
- **结果缓存**：相同搜索条件结果缓存30秒
- **增量加载**：大数据量结果采用分页或虚拟滚动
- **输入截流**：防止高频输入导致的性能问题（300ms）

## 6. 组件可配置项

每个模块可自定义以下参数，以适应不同场景需求：

1. **基础配置**：
   - 可搜索字段列表
   - 默认排序规则
   - 结果页大小选项
   
2. **高级设置**：
   - 是否启用语义搜索
   - 是否允许保存筛选条件
   - 搜索历史保存条数
   - 结果预加载策略 